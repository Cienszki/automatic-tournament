"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1776],{9086:(t,e,a)=>{a.d(e,{BC:()=>v,DX:()=>d,GX:()=>f,Is:()=>h,OR:()=>o,RK:()=>w,VM:()=>b,Xe:()=>m,eg:()=>x,gG:()=>T,iK:()=>s,jP:()=>p,mp:()=>u,o1:()=>I,oy:()=>S,uY:()=>i,wj:()=>y,zM:()=>g});var r=a(35317),n=a(56104);async function i(t,e,a){let i=(0,r.wP)(n.db),o=(0,r.H9)(n.db,"matches",t);if(!(await (0,r.x7)(o)).exists()){console.log("Match document ".concat(t," does not exist. This might be a scrim or practice game - skipping database save."));return}let d=(0,r.H9)(o,"games",e.id);i.update(o,{game_ids:(0,r.hq)(parseInt(e.id))}),i.set(d,e),a.forEach(t=>{let e=(0,r.H9)(d,"performances",t.playerId);i.set(e,t)}),await i.commit()}async function o(){let t=(0,r.H9)(n.db,"tournament","status"),e=await (0,r.x7)(t);return e.exists()?e.data():{roundId:"initial"}}async function d(t,e){if(!e||!e.uid||"string"!=typeof e.uid||""===e.uid.trim())throw console.error("[FATAL] saveTeam: Missing or invalid user object for Firestore write:",e),Error("You must be logged in to register a team. (No valid user for Firestore write)");if(t.captainId!==e.uid)throw Error("You can only register teams where you are the captain");let a=(0,r.wP)(n.db),i=(0,r.H9)((0,r.rJ)(n.db,"teams")),{players:o,...d}=t,s={...d,id:i.id,captainId:e.uid,status:"pending",createdAt:(0,r.O5)()};a.set(i,s);let c=(0,r.rJ)(n.db,"teams",i.id,"players");for(let t of(console.log("saveTeam: players for team",s.name,o.map(t=>({nickname:t.nickname}))),o)){let e=(0,r.H9)(c),n={...t,id:e.id};a.set(e,n)}await a.commit()}async function s(){let t=(0,r.rJ)(n.db,"teams"),e=await (0,r.GG)(t);return await Promise.all(e.docs.map(async t=>{let e=t.data(),a=e.createdAt,i=(0,r.rJ)(n.db,"teams",t.id,"players"),o=(await (0,r.GG)(i)).docs.map(t=>({...t.data(),id:t.id}));return{id:t.id,...e,players:o,createdAt:a?a.toDate().toISOString():new Date(0).toISOString()}}))}async function c(t){let e=doc(db,"teams",t),a=await getDoc(e);if(!a.exists())return;let r=a.data(),n=collection(db,"teams",t,"players"),i=(await getDocs(n)).docs.map(t=>({...t.data(),id:t.id})),o=r.createdAt;return{id:a.id,...r,players:i,createdAt:o?o.toDate().toISOString():new Date(0).toISOString()}}let l=t=>t&&"function"==typeof t.toDate?t.toDate().toISOString():t;async function u(t){let e=(0,r.rJ)(n.db,"matches"),a=(0,r.P)(e,(0,r._M)("teams","array-contains",t));return(await (0,r.GG)(a)).docs.map(t=>{let e=t.data();return{id:t.id,...e,scheduled_for:l(e.scheduled_for),defaultMatchTime:l(e.defaultMatchTime),dateTime:l(e.dateTime),proposedTime:l(e.proposedTime),completed_at:l(e.completed_at)}})}async function m(){let t=(0,r.rJ)(n.db,"matches");return(await (0,r.GG)(t)).docs.map(t=>{let e=t.data();return{id:t.id,...e,scheduled_for:l(e.scheduled_for),defaultMatchTime:l(e.defaultMatchTime),dateTime:l(e.dateTime),proposedTime:l(e.proposedTime),completed_at:l(e.completed_at)}})}async function f(){let t=(0,r.rJ)(n.db,"groups");return(await (0,r.GG)(t)).docs.map(t=>{let e=t.data();return{id:t.id,name:e.name,standings:e.standings||{}}})}async function p(){let t=(0,r.rJ)(n.db,"announcements"),e=(0,r.P)(t,(0,r.My)("createdAt","desc"));return(await (0,r.GG)(e)).docs.map(t=>{let e=t.data(),a=e.createdAt;return{id:t.id,title:e.title,content:e.content,authorId:e.authorId||"",authorName:e.authorName||"N/A",createdAt:a?a.toDate():new Date(0)}})}async function h(t,e,a){var i,o;let d=(0,r.H9)(n.db,"matches",t),s=await (0,r.x7)(d);if(!s.exists())throw Error("Match not found");let c=s.data(),l=null===(i=c.teams)||void 0===i?void 0:i[0],u=null===(o=c.teams)||void 0===o?void 0:o[1],m=null;e>a?m=l:a>e&&(m=u);let f=e>0||a>0,p={"teamA.score":e,"teamB.score":a};f?(p.status="completed",p.winnerId=m,p.completed_at=new Date().toISOString()):(p.status="pending",p.winnerId=null,p.completed_at=null),await (0,r.mZ)(d,p)}async function w(){let t=await s(),e=[];return t.forEach(t=>{t.players&&t.players.forEach(a=>{e.push({...a,teamId:t.id,teamName:t.name,teamTag:t.tag})})}),e}async function g(t){let e=(0,r.H9)(n.db,"pickems",t),a=await (0,r.x7)(e);return a.exists()?a.data():null}async function y(t,e){var a;let i=(0,r.H9)(n.db,"tournament","status");if("initial"!==((null===(a=(await (0,r.x7)(i)).data())||void 0===a?void 0:a.roundId)||"initial"))throw Error("Pick'em submissions are now locked as the tournament registration phase is over.");let o=(0,r.H9)(n.db,"pickems",t),d={};e.champion&&e.champion.forEach(t=>d[t]=16),e.runnerUp&&e.runnerUp.forEach(t=>d[t]=15),e.thirdPlace&&e.thirdPlace.forEach(t=>d[t]=14),e.fourthPlace&&e.fourthPlace.forEach(t=>d[t]=13),e.fifthToSixth&&e.fifthToSixth.forEach(t=>d[t]=11),e.seventhToEighth&&e.seventhToEighth.forEach(t=>d[t]=9),e.ninthToTwelfth&&e.ninthToTwelfth.forEach(t=>d[t]=6),e.thirteenthToSixteenth&&e.thirteenthToSixteenth.forEach(t=>d[t]=2),await (0,r.BN)(o,{userId:t,scores:d,lastUpdated:(0,r.O5)()},{merge:!0})}async function b(t){let e=(0,r.H9)(n.db,"users",t),a=await (0,r.x7)(e);return a.exists()?a.data():null}async function x(t,e){let a=(0,r.H9)(n.db,"users",t);await (0,r.BN)(a,e,{merge:!0})}async function v(t,e){if(!e)return null;let a=(0,r.H9)(n.db,"fantasyLineups",t,"rounds",e),i=await (0,r.x7)(a);return i.exists()?i.data():null}async function T(){var t;let e=(0,r.rJ)(n.db,"fantasyLineups"),a=(0,r.P)(e,(0,r.My)("totalFantasyScore","desc")),i=await (0,r.GG)(a),o=await (0,r.x7)((0,r.H9)(n.db,"tournaments","current")),d=o.exists()?null===(t=o.data())||void 0===t?void 0:t.roundId:null;return d?await Promise.all(i.docs.map(async t=>{var e;let a=t.id,i=t.data(),o=(0,r.H9)(n.db,"fantasyLineups",a,"rounds",d),s=await (0,r.x7)(o);return{...i,lineup:s.exists()&&(null===(e=s.data())||void 0===e?void 0:e.lineup)||{}}})):i.docs.map(t=>({...t.data(),lineup:{}}))}async function I(t,e,a,i){if(!a)throw Error("A valid roundId must be provided to save a fantasy lineup.");let o=(0,r.H9)(n.db,"fantasyLineups",t),d=(0,r.H9)(o,"rounds",a),s=(0,r.wP)(n.db);s.set(o,{userId:t,displayName:i,totalFantasyScore:0},{merge:!0}),s.set(d,{roundId:a,lineup:e,roundScore:0}),await s.commit()}async function S(){let t=(0,r.rJ)(n.db,"pickems");return(await (0,r.GG)(t)).docs.map(t=>t.data())}},56104:(t,e,a)=>{let r;a.d(e,{IG:()=>m,db:()=>u,j2:()=>l});var n=a(23915),i=a(93004),o=a(35317),d=a(90858),s=a(81427);let c={apiKey:"AIzaSyDvxTgVH39ZCw6UOdxx6TdWTM6NE1vuVa4",authDomain:"tournament-tracker-f35tb.firebaseapp.com",projectId:"tournament-tracker-f35tb",storageBucket:"tournament-tracker-f35tb.firebasestorage.app",messagingSenderId:"910618712944",appId:"1:910618712944:web:ce571be24bda274cde8db5"};console.log("Firebase Config:",c);try{r=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)(c),console.log("Firebase App Initialized:",r.name)}catch(t){console.error("Firebase initialization error",t),r=null}let l=(0,i.xI)(r);l.tenantId=null;let u=(0,o.aU)(r),m=(0,d.c7)(r);(0,s.Uz)(r)},59434:(t,e,a)=>{a.d(e,{MX:()=>d,ZV:()=>s,cn:()=>i});var r=a(52596),n=a(39688);function i(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,n.QP)((0,r.$)(e))}let o={Carry:1,Mid:2,Offlane:3,"Soft Support":4,"Hard Support":5};function d(t){return[...t].sort((t,e)=>{var a,r;return(null!==(a=o[t.role])&&void 0!==a?a:99)-(null!==(r=o[e.role])&&void 0!==r?r:99)})}function s(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},66695:(t,e,a)=>{a.d(e,{BT:()=>c,Wu:()=>l,ZB:()=>s,Zp:()=>o,aR:()=>d,wL:()=>u});var r=a(95155),n=a(12115),i=a(59434);let o=n.forwardRef((t,e)=>{let{className:a,...n}=t;return(0,r.jsx)("div",{ref:e,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});o.displayName="Card";let d=n.forwardRef((t,e)=>{let{className:a,...n}=t;return(0,r.jsx)("div",{ref:e,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...n})});d.displayName="CardHeader";let s=n.forwardRef((t,e)=>{let{className:a,...n}=t;return(0,r.jsx)("div",{ref:e,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});s.displayName="CardTitle";let c=n.forwardRef((t,e)=>{let{className:a,...n}=t;return(0,r.jsx)("div",{ref:e,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let l=n.forwardRef((t,e)=>{let{className:a,...n}=t;return(0,r.jsx)("div",{ref:e,className:(0,i.cn)("p-6 pt-0",a),...n})});l.displayName="CardContent";let u=n.forwardRef((t,e)=>{let{className:a,...n}=t;return(0,r.jsx)("div",{ref:e,className:(0,i.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"}}]);