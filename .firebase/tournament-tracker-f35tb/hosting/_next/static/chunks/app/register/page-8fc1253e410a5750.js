(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2454],{58649:(e,r,s)=>{Promise.resolve().then(s.bind(s,62821))},59409:(e,r,s)=>{"use strict";s.d(r,{bq:()=>u,eb:()=>j,gC:()=>h,l6:()=>d,yv:()=>m});var a=s(95155),t=s(12115),l=s(31992),n=s(79556),o=s(77381),i=s(10518),c=s(59434);let d=l.bL;l.YJ;let m=l.WT,u=t.forwardRef((e,r)=>{let{className:s,children:t,...o}=e;return(0,a.jsxs)(l.l9,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[t,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(l.PP,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let p=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(l.wn,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let h=t.forwardRef((e,r)=>{let{className:s,children:t,position:n="popper",...o}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:r,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...o,children:[(0,a.jsx)(x,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(p,{})]})})});h.displayName=l.UC.displayName,t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(l.JU,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=l.JU.displayName;let j=t.forwardRef((e,r)=>{let{className:s,children:t,...n}=e;return(0,a.jsxs)(l.q7,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:t})]})});j.displayName=l.q7.displayName,t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(l.wv,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=l.wv.displayName},60997:(e,r,s)=>{"use strict";s.d(r,{Dv:()=>t,aI:()=>a});let a=24e3,t=["Carry","Mid","Offlane","Soft Support","Hard Support"]},62821:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>V});var a=s(95155),t=s(12115),l=s(6874),n=s.n(l),o=s(66766),i=s(35695),c=s(62177),d=s(90221),m=s(68663),u=s(30285),x=s(99708),p=s(59434),h=s(85057);let j=c.Op,f=t.createContext({}),g=e=>{let{...r}=e;return(0,a.jsx)(f.Provider,{value:{name:r.name},children:(0,a.jsx)(c.xI,{...r})})},y=()=>{let e=t.useContext(f),r=t.useContext(N),{getFieldState:s,formState:a}=(0,c.xW)(),l=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},N=t.createContext({}),b=t.forwardRef((e,r)=>{let{className:s,...l}=e,n=t.useId();return(0,a.jsx)(N.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:r,className:(0,p.cn)("space-y-2",s),...l})})});b.displayName="FormItem";let w=t.forwardRef((e,r)=>{let{className:s,...t}=e,{error:l,formItemId:n}=y();return(0,a.jsx)(h.J,{ref:r,className:(0,p.cn)(l&&"text-destructive",s),htmlFor:n,...t})});w.displayName="FormLabel";let v=t.forwardRef((e,r)=>{let{...s}=e,{error:t,formItemId:l,formDescriptionId:n,formMessageId:o}=y();return(0,a.jsx)(x.DX,{ref:r,id:l,"aria-describedby":t?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!t,...s})});v.displayName="FormControl";let R=t.forwardRef((e,r)=>{let{className:s,...t}=e,{formDescriptionId:l}=y();return(0,a.jsx)("p",{ref:r,id:l,className:(0,p.cn)("text-sm text-muted-foreground",s),...t})});R.displayName="FormDescription";let S=t.forwardRef((e,r)=>{var s;let{className:t,children:l,...n}=e,{error:o,formMessageId:i}=y(),c=o?String(null!==(s=null==o?void 0:o.message)&&void 0!==s?s:""):l;return c?(0,a.jsx)("p",{ref:r,id:i,className:(0,p.cn)("text-sm font-medium text-destructive",t),...n,children:c}):null});S.displayName="FormMessage";var k=s(62523),C=s(66695),I=s(47262),M=s(59409),U=s(13896),P=s(79311),A=s(50172),F=s(62354),D=s(59576),L=s(60997),T=s(19050),Y=s(90858),B=s(51368),Z=s(56104);let q=async(e,r)=>{let s=(0,Y.KR)(Z.IG,"screenshots/".concat(r,"/").concat((0,B.A)()));return await (0,Y.D)(s,e),await (0,Y.qk)(s)},z=async(e,r)=>{let s=e.name.split(".").pop(),a="".concat(r.toLowerCase().replace(/\s+/g,"-"),"-logo-").concat((0,B.A)(),".").concat(s),t=(0,Y.KR)(Z.IG,"team-logos/".concat(a));return await (0,Y.D)(t,e),await (0,Y.qk)(t)};var _=s(23915);let E=["image/jpeg","image/jpg","image/png","image/webp"],G=m.Ik({name:m.Yj().min(3,"Team name must be at least 3 characters.").regex(/^[A-Za-z0-9 _-]+$/,"Team name can only contain letters, numbers, spaces, hyphens, and underscores."),tag:m.Yj().min(2,"Tag must be 2-4 characters.").max(4),discordUsername:m.Yj().min(2,"Discord username is required."),motto:m.Yj().min(5,"Motto must be at least 5 characters."),logo:m.Ie(e=>e instanceof File,"Logo is required.").refine(e=>!!e&&e.size<=5242880,"Max file size is 5MB.").refine(e=>!!e&&E.includes(e.type),"Only .jpg, .jpeg, .png and .webp formats are supported."),players:m.YO(m.Ik({nickname:m.Yj().min(2,"Nickname is required."),role:m.k5(L.Dv),mmr:m.au.number().min(1e3).max(12e3),steamProfileUrl:m.Yj().url("Must be a valid Steam profile URL."),profileScreenshot:m.Ie(e=>e instanceof File,"Screenshot is required.").refine(e=>!!e&&e.size<=5242880,"Max file size is 5MB.").refine(e=>!!e&&E.includes(e.type),"Only .jpg, .jpeg, .png and .webp formats are supported.")})).min(5,"You must register exactly 5 players.").max(5),rulesAcknowledged:m.zM().refine(e=>!0===e,{message:"You must acknowledge the tournament rules."})}).refine(e=>e.players.reduce((e,r)=>e+r.mmr,0)<=L.aI,{message:"Total team MMR cannot exceed ".concat(L.aI.toLocaleString(),"."),path:["players"]});function V(){let{user:e,signInWithGoogle:r}=(0,D.A)(),[s,l]=t.useState(null),[m,x]=t.useState(null),[h,f]=t.useState([,,,,,].fill(null)),y=(0,i.useRouter)(),N=(0,c.mN)({resolver:(0,d.u)(G),mode:"onChange",defaultValues:{name:"",tag:"",discordUsername:"",motto:"",logo:null,players:[,,,,,].fill({nickname:"",role:void 0,mmr:0,steamProfileUrl:"",profileScreenshot:null}),rulesAcknowledged:!1}}),{fields:Y}=(0,c.jz)({control:N.control,name:"players"}),B=N.watch("players").reduce((e,r)=>e+(Number(r.mmr)||0),0),{isSubmitting:Z,isValid:E}=N.formState,V=e=>{var r;let s=(null===(r=e.target.files)||void 0===r?void 0:r[0])||null;if(N.setValue("logo",s,{shouldValidate:!0}),s){let e=new FileReader;e.onloadend=()=>x(e.result),e.readAsDataURL(s)}else x(null)},O=(e,r)=>{var s;let a=(null===(s=e.target.files)||void 0===s?void 0:s[0])||null;if(N.setValue("players.".concat(r,".profileScreenshot"),a,{shouldValidate:!0}),a){let e=new FileReader;e.onloadend=()=>{f(s=>{let a=[...s];return a[r]=e.result,a})},e.readAsDataURL(a)}else f(e=>{let s=[...e];return s[r]=null,s})};try{let e=(0,_.Sx)().options.projectId;console.log("[DEBUG] Frontend Firebase projectId:",e)}catch(e){console.log("[DEBUG] Could not get Firebase projectId",e)}let W=async r=>{if(console.log("[DEBUG] user object at submit:",e),!e){l("You must be logged in to register a team.");return}if(!e.uid||"string"!=typeof e.uid||""===e.uid.trim()){console.error("Registration error: user.uid is missing or invalid",e),l("Your user ID is missing. Please log out and log in again, or contact support.");return}l(null);try{let s=await z(r.logo,r.name),a=await Promise.all(r.players.map((e,s)=>q(e.profileScreenshot,"".concat(r.name,"-player").concat(s+1)))),t={name:r.name,tag:r.tag,discordUsername:r.discordUsername,motto:r.motto,logoUrl:s,captainId:e.uid,players:r.players.map((e,r)=>({nickname:e.nickname,mmr:e.mmr,role:e.role,steamProfileUrl:e.steamProfileUrl,profileScreenshotUrl:a[r]}))},n=await (0,T.l)({...t,_authUser:e});(null==n?void 0:n.success)?y.push("/my-team"):l((null==n?void 0:n.message)||"An unknown error occurred during registration.")}catch(e){l(e.message||"An unexpected error occurred during registration.")}};return e?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(C.Zp,{children:(0,a.jsxs)(C.aR,{className:"text-center",children:[(0,a.jsx)(U.A,{className:"h-16 w-16 mx-auto text-primary"}),(0,a.jsx)(C.ZB,{className:"text-4xl font-bold",children:"Team Registration"})]})}),(0,a.jsx)(j,{...N,children:(0,a.jsxs)("form",{onSubmit:N.handleSubmit(W),className:"space-y-8",children:[(0,a.jsxs)(C.Zp,{children:[(0,a.jsx)(C.aR,{children:(0,a.jsx)(C.ZB,{children:"Team & Captain Details"})}),(0,a.jsxs)(C.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)(g,{name:"name",control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsxs)(w,{children:["Team Name",(0,a.jsx)("span",{className:"block text-sm font-semibold text-[#b86fc6] mt-1",children:"(Must be identical to the ingame team name!)"})]}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{...r})}),(0,a.jsx)(S,{})]})}}),(0,a.jsx)(g,{name:"tag",control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"Team Tag"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{...r})}),(0,a.jsx)(S,{})]})}}),(0,a.jsx)(g,{name:"discordUsername",control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"Captain's Discord"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{...r,placeholder:"your_discord_name"})}),(0,a.jsx)(S,{})]})}}),(0,a.jsx)(g,{name:"motto",control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"Team Motto"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{...r})}),(0,a.jsx)(S,{})]})}})]}),(0,a.jsx)(g,{control:N.control,name:"logo",render:()=>(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"Team Logo"}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-lg bg-muted flex items-center justify-center border",children:m?(0,a.jsx)(o.default,{src:m,alt:"Logo preview",width:128,height:128,className:"object-cover rounded-lg"}):(0,a.jsx)(P.A,{className:"w-16 h-16 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{type:"file",accept:"image/*",onChange:V})}),(0,a.jsx)(R,{className:"mt-2",children:"Max 5MB. JPG, PNG, WEBP. Recommended: Square aspect ratio."}),(0,a.jsx)(S,{})]})]})]})})]})]}),(0,a.jsxs)(C.Zp,{children:[(0,a.jsxs)(C.aR,{children:[(0,a.jsx)(C.ZB,{children:"Player Roster"}),(0,a.jsxs)("div",{className:(0,p.cn)("p-3 mt-4 rounded-md text-center font-semibold",B>L.aI?"text-destructive bg-destructive/10":"text-primary bg-primary/10"),children:["Total MMR: ",B.toLocaleString()," / ",L.aI.toLocaleString()]}),N.formState.errors.players&&(0,a.jsx)("p",{className:"text-sm font-medium text-destructive mt-2 text-center",children:N.formState.errors.players.message})]}),(0,a.jsx)(C.Wu,{className:"space-y-6",children:Y.map((e,r)=>(0,a.jsxs)(C.Zp,{className:"p-4",children:[(0,a.jsxs)("h4",{className:"font-bold text-lg text-center mb-4",children:["Player ",r+1]}),(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(g,{name:"players.".concat(r,".nickname"),control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"Nickname"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{...r})}),(0,a.jsx)(S,{})]})}}),(0,a.jsx)(g,{name:"players.".concat(r,".mmr"),control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"MMR"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{type:"number",...r})}),(0,a.jsx)(S,{})]})}}),(0,a.jsx)(g,{name:"players.".concat(r,".steamProfileUrl"),control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{className:"sm:col-span-2",children:[(0,a.jsx)(w,{children:"Steam Profile URL"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{...r})}),(0,a.jsx)(S,{})]})}}),(0,a.jsx)(g,{name:"players.".concat(r,".role"),control:N.control,render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"Role"}),(0,a.jsxs)(M.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,a.jsx)(v,{children:(0,a.jsx)(M.bq,{children:(0,a.jsx)(M.yv,{placeholder:"Select a role"})})}),(0,a.jsx)(M.gC,{children:L.Dv.map(e=>(0,a.jsx)(M.eb,{value:e,children:e},e))})]}),(0,a.jsx)(S,{})]})}})]}),(0,a.jsx)(g,{control:N.control,name:"players.".concat(r,".profileScreenshot"),render:()=>(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{children:"MMR Screenshot"}),(0,a.jsx)(v,{children:(0,a.jsx)(k.p,{type:"file",accept:"image/*",onChange:e=>O(e,r)})}),(0,a.jsx)(S,{}),h[r]&&(0,a.jsx)("div",{className:"mt-2 rounded-md border bg-muted p-2",children:(0,a.jsx)(o.default,{src:h[r],alt:"Player ".concat(r+1," screenshot preview"),width:400,height:225,className:"rounded-md object-contain mx-auto"})})]})})]})]},e.id))})]}),(0,a.jsx)(C.Zp,{children:(0,a.jsxs)(C.Wu,{className:"pt-6",children:[(0,a.jsx)(g,{control:N.control,name:"rulesAcknowledged",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,a.jsx)(v,{children:(0,a.jsx)(I.S,{checked:r.value,onCheckedChange:r.onChange})}),(0,a.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,a.jsxs)(w,{children:["I agree to the ",(0,a.jsx)(n(),{href:"/rules",className:"text-primary hover:underline",children:"tournament rules"}),"."]}),(0,a.jsx)(S,{})]})]})}}),(0,a.jsxs)(u.$,{type:"submit",size:"lg",className:"w-full mt-6",disabled:Z||!E,children:[Z?(0,a.jsx)(A.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,a.jsx)(F.A,{className:"mr-2 h-5 w-5"}),"Submit Registration"]}),s&&(0,a.jsx)("p",{className:"text-sm font-medium text-destructive mt-4 text-center",children:s})]})})]})})]}):(0,a.jsxs)(C.Zp,{className:"text-center",children:[(0,a.jsxs)(C.aR,{children:[(0,a.jsx)(C.ZB,{children:"Please Login"}),(0,a.jsx)(C.BT,{children:"You must be logged in to register a team."})]}),(0,a.jsx)(C.Wu,{children:(0,a.jsx)(u.$,{onClick:r,children:"Sign in with Google"})})]})}},85057:(e,r,s)=>{"use strict";s.d(r,{J:()=>c});var a=s(95155),t=s(12115),l=s(40968),n=s(74466),o=s(59434);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(l.b,{ref:r,className:(0,o.cn)(i(),s),...t})});c.displayName=l.b.displayName}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,7138,4277,6874,2759,3063,6433,5725,1345,8034,6298,3858,2658,9023,8187,8441,1684,7358],()=>r(58649)),_N_E=e.O()}]);